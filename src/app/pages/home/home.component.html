<div class="home-container">
  <div class="overlay"></div>
  <app-header></app-header>

  <div class="search-overlay" 
       [class.active]="isSearchActive"
       (click)="toggleSearch(false)">
  </div>

  <main>
    <h1 [class.darkened]="isSearchActive">Genshin Impact</h1>
    <h2 [class.darkened]="isSearchActive">Abyss Team Request</h2>
    <p [class.darkened]="isSearchActive">Search your favorite creator and request a team to be played in the Abyss!</p>

    <div class="search-container" [class.active]="isSearchActive">
      <div class="search-bar" (click)="$event.stopPropagation()">
        <span class="search-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"/>
            <line x1="21" y1="21" x2="16.65" y2="16.65"/>
          </svg>
        </span>
        <input 
          type="text" 
          [(ngModel)]="searchQuery" 
          placeholder="Search user..."
          class="search-input"
          (focus)="toggleSearch(true)"
          (input)="onSearch()"
          (click)="$event.stopPropagation()"
          #searchInput
        >
      </div>

      <!-- Search Results Container -->
      <div class="search-results" *ngIf="isSearchActive" [@searchResults] (click)="$event.stopPropagation()">
        <div class="results-container">
          <div class="no-results" *ngIf="!searchQuery" [@resultItem]>
            Start typing to search...
          </div>
          <div class="no-results" *ngIf="searchQuery && searchResults.length === 0" [@resultItem]>
            No users found...
          </div>
          <div class="user-result" 
               *ngFor="let user of searchResults"
               [@resultItem]
               (click)="navigateToProfile(user.username)">
            <img [src]="user.avatar || 'assets/images/default-avatar.png'" 
                 [alt]="user.username" 
                 class="user-avatar">
            <span class="username">{{ user.username }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Add the info message here -->
    <div class="info-message" [class.darkened]="isSearchActive">
      <i class="fas fa-info-circle"></i>
      No login required! You can send team requests as an anonymous user.
    </div>
  </main>

  <div class="zoom-hint">
    <div class="hint-icon">
      <i class="fas fa-exclamation"></i>
    </div>
    <div class="hint-message">
      If the page looks weird on PC, try zooming out!
    </div>
  </div>
</div>
